{% extends "index.html" %}
{% from "book_macro.html" import show_books %}
{% block content %}

<ul class="nav nav-tabs justify-content-center" style=" padding-right: 2%; padding-left: 7%;">
<!-- Navigation tabs -->
{%if current_user != None%}
<!-- Check if the current user is an admin -->
    <li class="nav-item" style="margin-left: auto;">
      <a class="nav-link active" href="/liste">Accueil</a>
      <!-- Link to home page -->
    </li>
    <li class="nav-item">
        <a class="nav-link link-body-emphasis" href="/profile">Profil</a>
        <!-- Link to profile page -->
    </li>
{% if current_user.group == "admin" %}
    <li class="nav-item">
        <a class="nav-link link-body-emphasis" href="/administration">Admin</a>
        <!-- Link to admin page -->
    </li>
    <br> 
    <!-- Line break -->
{% endif %}
    <li class="nav-item" style="margin-left: auto;">
        <form action="/logout" method="post" >
            <button class="btn btn-danger" type="submit" >Se déconnecter</button>
            <!-- Logout button -->
        </form>
    </li>
{%else%}
    <li class="nav-item" style="margin-left: auto;">
        <a href="/login"><button class="btn btn-danger" type="button">Quitter l'application</button></a>
        <!-- Link to login page -->
    </li>
{%endif%}
</ul>

<div class="container">
<!-- Container for book list -->

    <table class="table table-hover">
    <!-- Table to display books -->
        <tr>
            <th>Id</th>
            <th>Propriétaire</th>
            <th>Nom</th>
            <th>Auteur</th>
            <th>Editeur</th>
            <th>Prix</th>
            {% if current_user != None%}
            <th>Actions</th>
            {%endif%}
        </tr>
        {% for book, owner in book_with_owner %}
        <!-- Loop through each book -->
            {%if book.bought == False%}
                {{ show_books(book.id, book.name, book.Author, book.Editor, book.price, current_user, in_profile, book.bought, owner.username) }}
            {%endif%}
            <!-- Use the show_books macro to display book information -->
        {% endfor %}

        <th colspan="4">Nombres de livres : {{ Nombre }}</th>
        <!-- Table row for the number of books -->

    </table>

</div>
{% endblock %}
